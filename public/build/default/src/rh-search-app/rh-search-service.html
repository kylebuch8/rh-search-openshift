<html><head><link rel="import" href="../../bower_components/polymer/polymer-element.html"></head><body><dom-module id="rh-search-service"><script>class RhSearchService extends Polymer.Element{static get is(){return'rh-search-service'}static get properties(){return{solrUrl:{type:String,value:'https://access.redhat.com/rs/search'}}}search(a){let b=new Headers({Accept:'application/vnd.redhat.solr+json'}),d=Object.assign({},a,{enableElevation:!0,hl:!0,'hl.fl:abstract':'abstract','hl.fragsize':256,'hl.simple.post':'</mark>','hl.simple.pre':'<mark>','hl.snippets':1,rows:10,start:0});return fetch(`${this.solrUrl}?${this.serialize(d)}`,b).then(e=>e.json()).then(this._searchResponseHandler)}_searchResponseHandler(a){let b=a.highlighting,c={month:'short',day:'numeric',year:'numeric'};return a.response.docs.forEach(d=>{b[d.uri].abstract&&(d.abstract=b[d.uri].abstract[0]),d.lastModifiedDate&&(d.lastModifiedDateFormatted=Intl.DateTimeFormat(navigator.language,c).format(new Date(d.lastModifiedDate)))}),a.response.docs}serialize(a){let b=[];for(let c in a)a.hasOwnProperty(c)&&b.push(`${encodeURIComponent(c)}=${encodeURIComponent(a[c])}`);return b.join('&')}parameterize(a){var b={};return a?(a.replace(/([^?=&]+)(=([^&]*))?/g,(c,d,e,f)=>{b[d]=decodeURIComponent(f)}),b):b}}window.customElements.define(RhSearchService.is,RhSearchService);</script></dom-module></body></html>